app.controller('LeagueTableCtrl', ['$scope','$state','$stateParams','$auth','$location','$http', function($scope,$state,$stateParams,$auth,$location,$http){

	$scope.league_id = $stateParams.league_id;

	$scope.teams = [];

	var sourceTeams

	var getTable = function(){
		$http({
			method: 'get',
			url: '/api/leagues/' + $scope.league_id,
		}).success(function(resp){
			console.log(resp);
			$scope.teams = resp.table
			sourceTeams = resp.source_teams
			addName();
		})
	}

	var addName = function(){
		for(var i = 0; i < $scope.teams.length; i++){
			sourceId = $scope.teams[i].source_team_id
			$scope.teams[i].source_team_name = sourceTeams[sourceId - 1].name
		}
	}

	var init = function(){
		getTable();
	}

	init();

}])